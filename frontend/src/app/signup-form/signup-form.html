<div class="signup-container">
  <h2>Create Account</h2>

  @if (successMessage) {
    <div class="success-message">{{ successMessage }}</div>
  }

  @if (errors['general']) {
    <div class="error-message">{{ errors['general'] }}</div>
  }

  <form (ngSubmit)="onSubmit()" #signupForm="ngForm">
    <div class="form-group">
      <label for="fullName">Full Name *</label>
      <input
        type="text"
        id="fullName"
        name="fullName"
        [(ngModel)]="fullName"
        (input)="onFieldChange('fullName')"
        required
        [class.error]="errors['fullName']"
      />
      @if (errors['fullName']) {
        <span class="error-text">{{ errors['fullName'] }}</span>
      }
    </div>

    <div class="form-group">
      <label for="email">Email *</label>
      <input
        type="email"
        id="email"
        name="email"
        [(ngModel)]="email"
        (input)="onFieldChange('email')"
        required
        [class.error]="errors['email']"
      />
      @if (errors['email']) {
        <span class="error-text">{{ errors['email'] }}</span>
      }
    </div>

    <div class="form-group">
      <label for="password">Password *</label>
      <input
        type="password"
        id="password"
        name="password"
        [(ngModel)]="password"
        (input)="onFieldChange('password')"
        required
        [class.error]="errors['password']"
      />
      @if (errors['password']) {
        <span class="error-text">{{ errors['password'] }}</span>
      }
    </div>

    <div class="form-group">
      <label for="confirmPassword">Confirm Password *</label>
      <input
        type="password"
        id="confirmPassword"
        name="confirmPassword"
        [(ngModel)]="confirmPassword"
        (input)="onFieldChange('confirmPassword')"
        required
        [class.error]="errors['confirmPassword']"
      />
      @if (errors['confirmPassword']) {
        <span class="error-text">{{ errors['confirmPassword'] }}</span>
      }
    </div>

    <div class="form-group">
      <label for="address">Address</label>
      <input
        type="text"
        id="address"
        name="address"
        [(ngModel)]="address"
      />
    </div>

    <div class="form-group">
      <label for="phoneNumber">Phone Number</label>
      <input
        type="tel"
        id="phoneNumber"
        name="phoneNumber"
        [(ngModel)]="phoneNumber"
      />
    </div>

    <div class="form-group">
      <label for="adminCode">Admin Code (Optional)</label>
      <input
        type="text"
        id="adminCode"
        name="adminCode"
        [(ngModel)]="adminCode"
        placeholder="Enter ADMIN2024 to create admin account"
      />
      <small style="color: #666; font-size: 12px; display: block; margin-top: 5px;">
        Leave empty for regular user account. First user automatically becomes admin.
      </small>
    </div>

    <div class="form-group">
      <label for="securityQuestion">Security Question *</label>
      <select
        id="securityQuestion"
        name="securityQuestion"
        [(ngModel)]="securityQuestion"
        (change)="onFieldChange('securityQuestion')"
        required
        [class.error]="errors['securityQuestion']"
      >
        <option value="">Select a security question</option>
        @for (question of securityQuestions; track question) {
          <option [value]="question">{{ question }}</option>
        }
      </select>
      @if (errors['securityQuestion']) {
        <span class="error-text">{{ errors['securityQuestion'] }}</span>
      }
      <small style="color: #666; font-size: 12px; display: block; margin-top: 5px;">
        This will be used to reset your password if you forget it.
      </small>
    </div>

    <div class="form-group">
      <label for="securityAnswer">Security Answer *</label>
      <input
        type="text"
        id="securityAnswer"
        name="securityAnswer"
        [(ngModel)]="securityAnswer"
        (input)="onFieldChange('securityAnswer')"
        placeholder="Your answer to the security question"
        required
        [class.error]="errors['securityAnswer']"
      />
      @if (errors['securityAnswer']) {
        <span class="error-text">{{ errors['securityAnswer'] }}</span>
      }
    </div>

    <button type="submit" [disabled]="isLoading" class="submit-btn">
      @if (isLoading) {
        Creating Account...
      } @else {
        Sign Up
      }
    </button>
  </form>
</div>
